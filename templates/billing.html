{% extends "base_app.html" %}

{% block title %}Manage Your Plan{% endblock %}

{% block content %}
<style>
    /* Дополнительный стиль для информационного блока */
    .notice-bar {
        text-align: center;
        padding: 15px;
        background-color: rgba(255, 222, 0, 0.2);
        border: 1px solid rgba(255, 222, 0, 0.4);
        border-radius: var(--button-border-radius);
        margin: 0 auto 40px auto;
        max-width: 1100px;
        color: var(--primary-text-color);
        font-weight: 500;
    }
</style>

<div class="app-container" style="display: block; padding-bottom: 40px;">

    <div class="notice-bar">
        Раздел управления подписками и платежами находится в разработке.
    </div>

    <div class="billing-header" style="max-width: 1100px; margin: 0 auto 40px auto;">
        <div class="current-plan-info">
            <h1>Manage your plan</h1>
            
            <p>Your current plan: 
                <strong>
                {% set plan_display_name = {
                    'taste': 'A Taste Of It',
                    'best': 'The Best Pick',
                    'pro': 'Pifly PRO'
                } %}
                {% set display_name = plan_display_name.get(current_user.current_plan, 'Free') %}
                {{ display_name }}
                </strong>
            </p>

            <p>You have <strong>{{ current_user.token_balance }}</strong> credits.</p>
            
        </div>
        <div class="plan-card">
            <h3 class="plan-name">Top Up Credits</h3>
            <p class="plan-description">Need more credits before your next renewal?</p>
            <div class="plan-price">&euro;5</div>
            <ul class="plan-includes">
                <li class="available"><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>One-time purchase of 1,000 credits</li>
            </ul>
            <button class="btn btn-disabled" disabled>Top up credits</button>
        </div>
    </div>

    <hr style="width: 100%; max-width: 1100px; border-color: var(--border-color); margin: 40px auto;">

    <div class="plans-grid" style="max-width: 1100px; margin: 40px auto 0 auto;">
        
        <div class="plan-card">
            <h3 class="plan-name">A Taste Of It</h3>
            <p class="plan-description">For those who wants to start</p>
            <div class="plan-price">&euro;9<span>/mo</span></div>
            <ul class="plan-includes">
                <li class="available"><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>1,500 credits</li>
                <li class="available"><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>Up to 90 images monthly</li>
                <li class="unavailable"><svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /></svg>Credit Top-Up</li>
                </ul>
            <button class="btn btn-disabled" disabled>Subscribe</button>
        </div>

        <div class="plan-card highlighted">
            <h3 class="plan-name">The Best Pick</h3>
            <p class="plan-description">Best for full-time creators</p>
            <div class="plan-price">&euro;19<span>/mo</span></div>
            <ul class="plan-includes">
                <li class="available"><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>4,500 credits</li>
                 <li class="available"><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>Up to 270 images monthly</li>
                <li class="available"><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>Credit Top-Up</li>
                </ul>
             <button class="btn">Subscribe</button>
        </div>

        <div class="plan-card">
            <h3 class="plan-name">Pifly PRO</h3>
            <p class="plan-description">Teams and advanced creators</p>
            <div class="plan-price">&euro;35<span>/mo</span></div>
            <ul class="plan-includes">
                <li class="available"><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>15,000 credits</li>
                <li class="available"><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>Up to 900 images monthly</li>
                <li class="available"><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>Credit Top-Up</li>
                </ul>
            <button class="btn btn-disabled" disabled>Subscribe</button>
        </div>
    </div>

    {% if current_user.is_authenticated %}
    <div style="max-width: 1100px; margin: 60px auto 0 auto; text-align: center; border-top: 1px solid var(--border-color); padding-top: 40px;">
        <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
            <form action="{{ url_for('delete_account') }}" method="POST">
                <button type="submit" class="btn btn-danger" onclick="return confirm('WARNING: This will immediately and permanently delete your account and all data. This action cannot be undone. Are you sure?')">Delete Account</button>
            </form>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
